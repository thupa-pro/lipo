-- ============================================================================
-- LOCONOMY SEED DATA - DEVELOPMENT AND TESTING
-- Compatible with Supabase (PostgreSQL 13+)
-- Generated by elite AI engineer analysis
-- ============================================================================

-- ============================================================================
-- PERMISSIONS SEED DATA
-- ============================================================================

-- Core permissions for RBAC system
INSERT INTO permissions (name, description, resource, action) VALUES
-- User management
('user.read', 'View user information', 'user', 'read'),
('user.update', 'Update user information', 'user', 'update'),
('user.delete', 'Delete user account', 'user', 'delete'),

-- Listing management
('listing.create', 'Create service listings', 'listing', 'create'),
('listing.read', 'View service listings', 'listing', 'read'),
('listing.update', 'Update service listings', 'listing', 'update'),
('listing.delete', 'Delete service listings', 'listing', 'delete'),
('listing.moderate', 'Moderate service listings', 'listing', 'moderate'),

-- Booking management
('booking.create', 'Create bookings', 'booking', 'create'),
('booking.read', 'View bookings', 'booking', 'read'),
('booking.update', 'Update booking status', 'booking', 'update'),
('booking.cancel', 'Cancel bookings', 'booking', 'cancel'),

-- Review management
('review.create', 'Create reviews', 'review', 'create'),
('review.read', 'View reviews', 'review', 'read'),
('review.moderate', 'Moderate reviews', 'review', 'moderate'),

-- Admin functions
('admin.users', 'Manage all users', 'admin', 'users'),
('admin.analytics', 'View platform analytics', 'admin', 'analytics'),
('admin.settings', 'Manage platform settings', 'admin', 'settings'),
('admin.billing', 'Manage billing and payments', 'admin', 'billing'),

-- Provider specific
('provider.availability', 'Manage availability schedule', 'provider', 'availability'),
('provider.analytics', 'View provider analytics', 'provider', 'analytics'),

-- Customer specific
('customer.payment', 'Manage payment methods', 'customer', 'payment'),
('customer.bookings', 'Manage customer bookings', 'customer', 'bookings');

-- ============================================================================
-- ROLE PERMISSIONS MAPPING
-- ============================================================================

-- Guest permissions
INSERT INTO role_permissions (role, permission_id, granted) 
SELECT 'guest', id, true FROM permissions WHERE name IN (
    'listing.read',
    'review.read'
);

-- Customer permissions
INSERT INTO role_permissions (role, permission_id, granted) 
SELECT 'customer', id, true FROM permissions WHERE name IN (
    'user.read',
    'user.update',
    'listing.read',
    'booking.create',
    'booking.read',
    'booking.cancel',
    'review.create',
    'review.read',
    'customer.payment',
    'customer.bookings'
);

-- Provider permissions (includes customer permissions)
INSERT INTO role_permissions (role, permission_id, granted) 
SELECT 'provider', id, true FROM permissions WHERE name IN (
    'user.read',
    'user.update',
    'listing.create',
    'listing.read',
    'listing.update',
    'listing.delete',
    'booking.read',
    'booking.update',
    'review.create',
    'review.read',
    'provider.availability',
    'provider.analytics',
    'customer.payment',
    'customer.bookings'
);

-- Admin permissions (all permissions)
INSERT INTO role_permissions (role, permission_id, granted) 
SELECT 'admin', id, true FROM permissions;

-- Super admin permissions (all permissions)
INSERT INTO role_permissions (role, permission_id, granted) 
SELECT 'super_admin', id, true FROM permissions;

-- ============================================================================
-- REGIONS SEED DATA
-- ============================================================================

INSERT INTO regions (code, name, country_code, timezone, currency, locale, languages, is_active, commission_rate, compliance_settings, feature_flags) VALUES
('US', 'United States', 'US', 'America/New_York', 'USD', 'en-US', '["en", "es"]', true, 0.10, '{"gdpr": false, "ccpa": true, "dataResidency": false}', '{"escrowPayments": true, "backgroundChecks": true, "insurance": true}'),
('CA', 'Canada', 'CA', 'America/Toronto', 'CAD', 'en-CA', '["en", "fr"]', true, 0.08, '{"gdpr": false, "ccpa": false, "dataResidency": true}', '{"escrowPayments": true, "backgroundChecks": true, "insurance": true}'),
('EU', 'European Union', 'GB', 'Europe/London', 'EUR', 'en-GB', '["en", "de", "fr", "es", "it"]', true, 0.12, '{"gdpr": true, "ccpa": false, "dataResidency": true}', '{"escrowPayments": true, "backgroundChecks": false, "insurance": false}'),
('UK', 'United Kingdom', 'GB', 'Europe/London', 'GBP', 'en-GB', '["en"]', true, 0.11, '{"gdpr": true, "ccpa": false, "dataResidency": true}', '{"escrowPayments": true, "backgroundChecks": true, "insurance": true}'),
('AU', 'Australia', 'AU', 'Australia/Sydney', 'AUD', 'en-AU', '["en"]', true, 0.09, '{"gdpr": false, "ccpa": false, "dataResidency": true}', '{"escrowPayments": true, "backgroundChecks": true, "insurance": true}');

-- ============================================================================
-- CITIES SEED DATA
-- ============================================================================

-- US Cities
INSERT INTO cities (region_id, name, slug, state_province, country_code, coordinates, population, is_active, service_radius_km) VALUES
((SELECT id FROM regions WHERE code = 'US'), 'New York', 'new-york', 'NY', 'US', POINT(-74.0059, 40.7128), 8336817, true, 25.0),
((SELECT id FROM regions WHERE code = 'US'), 'Los Angeles', 'los-angeles', 'CA', 'US', POINT(-118.2437, 34.0522), 3979576, true, 30.0),
((SELECT id FROM regions WHERE code = 'US'), 'Chicago', 'chicago', 'IL', 'US', POINT(-87.6298, 41.8781), 2693976, true, 25.0),
((SELECT id FROM regions WHERE code = 'US'), 'Houston', 'houston', 'TX', 'US', POINT(-95.3698, 29.7604), 2320268, true, 30.0),
((SELECT id FROM regions WHERE code = 'US'), 'Phoenix', 'phoenix', 'AZ', 'US', POINT(-112.0740, 33.4484), 1680992, true, 25.0),
((SELECT id FROM regions WHERE code = 'US'), 'Miami', 'miami', 'FL', 'US', POINT(-80.1918, 25.7617), 467963, true, 20.0),
((SELECT id FROM regions WHERE code = 'US'), 'Seattle', 'seattle', 'WA', 'US', POINT(-122.3321, 47.6062), 753675, true, 25.0),
((SELECT id FROM regions WHERE code = 'US'), 'San Francisco', 'san-francisco', 'CA', 'US', POINT(-122.4194, 37.7749), 873965, true, 20.0),
((SELECT id FROM regions WHERE code = 'US'), 'Boston', 'boston', 'MA', 'US', POINT(-71.0589, 42.3601), 694583, true, 20.0),
((SELECT id FROM regions WHERE code = 'US'), 'Austin', 'austin', 'TX', 'US', POINT(-97.7431, 30.2672), 978908, true, 25.0);

-- CA Cities  
INSERT INTO cities (region_id, name, slug, state_province, country_code, coordinates, population, is_active, service_radius_km) VALUES
((SELECT id FROM regions WHERE code = 'CA'), 'Toronto', 'toronto', 'ON', 'CA', POINT(-79.3832, 43.6532), 2930000, true, 25.0),
((SELECT id FROM regions WHERE code = 'CA'), 'Vancouver', 'vancouver', 'BC', 'CA', POINT(-123.1216, 49.2827), 675218, true, 20.0),
((SELECT id FROM regions WHERE code = 'CA'), 'Montreal', 'montreal', 'QC', 'CA', POINT(-73.5673, 45.5017), 1780000, true, 25.0),
((SELECT id FROM regions WHERE code = 'CA'), 'Calgary', 'calgary', 'AB', 'CA', POINT(-114.0719, 51.0447), 1336000, true, 25.0),
((SELECT id FROM regions WHERE code = 'CA'), 'Ottawa', 'ottawa', 'ON', 'CA', POINT(-75.6972, 45.4215), 994837, true, 20.0);

-- EU/UK Cities
INSERT INTO cities (region_id, name, slug, state_province, country_code, coordinates, population, is_active, service_radius_km) VALUES
((SELECT id FROM regions WHERE code = 'UK'), 'London', 'london', 'England', 'GB', POINT(-0.1276, 51.5074), 9000000, true, 30.0),
((SELECT id FROM regions WHERE code = 'UK'), 'Manchester', 'manchester', 'England', 'GB', POINT(-2.2426, 53.4808), 547000, true, 20.0),
((SELECT id FROM regions WHERE code = 'UK'), 'Birmingham', 'birmingham', 'England', 'GB', POINT(-1.8904, 52.4862), 1140000, true, 25.0),
((SELECT id FROM regions WHERE code = 'EU'), 'Berlin', 'berlin', 'Berlin', 'DE', POINT(13.4050, 52.5200), 3700000, true, 25.0),
((SELECT id FROM regions WHERE code = 'EU'), 'Paris', 'paris', '√éle-de-France', 'FR', POINT(2.3522, 48.8566), 2165000, true, 30.0);

-- AU Cities
INSERT INTO cities (region_id, name, slug, state_province, country_code, coordinates, population, is_active, service_radius_km) VALUES
((SELECT id FROM regions WHERE code = 'AU'), 'Sydney', 'sydney', 'NSW', 'AU', POINT(151.2093, -33.8688), 5312000, true, 30.0),
((SELECT id FROM regions WHERE code = 'AU'), 'Melbourne', 'melbourne', 'VIC', 'AU', POINT(144.9631, -37.8136), 5078000, true, 30.0),
((SELECT id FROM regions WHERE code = 'AU'), 'Brisbane', 'brisbane', 'QLD', 'AU', POINT(153.0281, -27.4705), 2560000, true, 25.0);

-- ============================================================================
-- TENANTS SEED DATA
-- ============================================================================

INSERT INTO tenants (name, slug, domain, region, subscription_tier, settings, is_active) VALUES
('Loconomy US', 'loconomy-us', 'loconomy.com', 'US', 'enterprise', '{"branding": {"primaryColor": "#6366f1", "secondaryColor": "#8b5cf6"}, "features": {"aiMatching": true, "realTimeChat": true}}', true),
('Loconomy Canada', 'loconomy-ca', 'loconomy.ca', 'CA', 'professional', '{"branding": {"primaryColor": "#06b6d4", "secondaryColor": "#0891b2"}}', true),
('Loconomy Europe', 'loconomy-eu', 'loconomy.eu', 'EU', 'enterprise', '{"compliance": {"gdprCompliant": true}, "features": {"multiLanguage": true}}', true);

-- ============================================================================
-- SERVICE CATEGORIES SEED DATA
-- ============================================================================

-- Top-level categories
INSERT INTO categories (name, slug, description, icon_url, color_code, display_order, is_active) VALUES
('Home & Garden', 'home-garden', 'Home improvement, cleaning, gardening, and maintenance services', 'üè†', '#22c55e', 1, true),
('Personal Care', 'personal-care', 'Beauty, wellness, fitness, and health services', 'üíÜ‚Äç‚ôÄÔ∏è', '#f59e0b', 2, true),
('Professional Services', 'professional-services', 'Business, legal, financial, and consulting services', 'üíº', '#3b82f6', 3, true),
('Education & Training', 'education-training', 'Tutoring, coaching, workshops, and skill development', 'üìö', '#8b5cf6', 4, true),
('Events & Entertainment', 'events-entertainment', 'Event planning, photography, music, and entertainment', 'üéâ', '#ec4899', 5, true),
('Technology', 'technology', 'IT support, web development, digital marketing', 'üíª', '#06b6d4', 6, true),
('Transportation', 'transportation', 'Moving, delivery, driving, and logistics services', 'üöó', '#ef4444', 7, true),
('Pet Services', 'pet-services', 'Pet care, grooming, training, and veterinary services', 'üêï', '#84cc16', 8, true);

-- Home & Garden subcategories
INSERT INTO categories (name, slug, description, parent_id, display_order, is_active) VALUES
('House Cleaning', 'house-cleaning', 'Regular and deep cleaning services', (SELECT id FROM categories WHERE slug = 'home-garden'), 1, true),
('Landscaping', 'landscaping', 'Garden design, lawn care, and outdoor maintenance', (SELECT id FROM categories WHERE slug = 'home-garden'), 2, true),
('Home Repairs', 'home-repairs', 'General repairs, handyman services, and maintenance', (SELECT id FROM categories WHERE slug = 'home-garden'), 3, true),
('Plumbing', 'plumbing', 'Pipe repairs, installations, and emergency plumbing', (SELECT id FROM categories WHERE slug = 'home-garden'), 4, true),
('Electrical', 'electrical', 'Electrical repairs, installations, and safety inspections', (SELECT id FROM categories WHERE slug = 'home-garden'), 5, true),
('Painting', 'painting', 'Interior and exterior painting services', (SELECT id FROM categories WHERE slug = 'home-garden'), 6, true),
('HVAC', 'hvac', 'Heating, ventilation, and air conditioning services', (SELECT id FROM categories WHERE slug = 'home-garden'), 7, true),
('Pest Control', 'pest-control', 'Pest inspection, treatment, and prevention services', (SELECT id FROM categories WHERE slug = 'home-garden'), 8, true);

-- Personal Care subcategories
INSERT INTO categories (name, slug, description, parent_id, display_order, is_active) VALUES
('Hair & Beauty', 'hair-beauty', 'Hairstyling, makeup, and beauty treatments', (SELECT id FROM categories WHERE slug = 'personal-care'), 1, true),
('Massage Therapy', 'massage-therapy', 'Therapeutic and relaxation massage services', (SELECT id FROM categories WHERE slug = 'personal-care'), 2, true),
('Fitness Training', 'fitness-training', 'Personal training and fitness coaching', (SELECT id FROM categories WHERE slug = 'personal-care'), 3, true),
('Mental Health', 'mental-health', 'Counseling, therapy, and mental wellness services', (SELECT id FROM categories WHERE slug = 'personal-care'), 4, true),
('Nutrition', 'nutrition', 'Dietary consulting and meal planning services', (SELECT id FROM categories WHERE slug = 'personal-care'), 5, true);

-- Professional Services subcategories
INSERT INTO categories (name, slug, description, parent_id, display_order, is_active) VALUES
('Legal Services', 'legal-services', 'Legal consultation and representation', (SELECT id FROM categories WHERE slug = 'professional-services'), 1, true),
('Accounting', 'accounting', 'Tax preparation, bookkeeping, and financial services', (SELECT id FROM categories WHERE slug = 'professional-services'), 2, true),
('Business Consulting', 'business-consulting', 'Strategy, operations, and management consulting', (SELECT id FROM categories WHERE slug = 'professional-services'), 3, true),
('Marketing', 'marketing', 'Digital marketing, branding, and advertising services', (SELECT id FROM categories WHERE slug = 'professional-services'), 4, true);

-- ============================================================================
-- TAGS SEED DATA
-- ============================================================================

INSERT INTO tags (name, slug, description, usage_count) VALUES
-- Service attributes
('eco-friendly', 'eco-friendly', 'Environmentally conscious services and products', 0),
('same-day', 'same-day', 'Services available on the same day', 0),
('emergency', 'emergency', 'Emergency and urgent services', 0),
('licensed', 'licensed', 'Licensed and certified professionals', 0),
('insured', 'insured', 'Insured service providers', 0),
('verified', 'verified', 'Background-verified professionals', 0),
('experienced', 'experienced', 'Highly experienced service providers', 0),
('affordable', 'affordable', 'Budget-friendly service options', 0),
('premium', 'premium', 'High-end and luxury services', 0),
('mobile', 'mobile', 'Mobile services that come to you', 0),

-- Home services
('deep-cleaning', 'deep-cleaning', 'Thorough and comprehensive cleaning', 0),
('move-in-out', 'move-in-out', 'Moving-related cleaning and services', 0),
('organic', 'organic', 'Organic and natural products used', 0),
('pet-friendly', 'pet-friendly', 'Safe for pets and pet owners', 0),
('chemical-free', 'chemical-free', 'No harsh chemicals used', 0),

-- Technology
('24-7-support', '24-7-support', 'Round-the-clock technical support', 0),
('remote-service', 'remote-service', 'Services provided remotely', 0),
('on-site', 'on-site', 'Services provided at your location', 0),
('data-recovery', 'data-recovery', 'Data recovery and backup services', 0),
('security', 'security', 'Cybersecurity and data protection', 0),

-- Personal care
('relaxation', 'relaxation', 'Stress relief and relaxation services', 0),
('therapeutic', 'therapeutic', 'Medically therapeutic treatments', 0),
('holistic', 'holistic', 'Holistic and alternative approaches', 0),
('weight-loss', 'weight-loss', 'Weight management and fitness', 0),
('senior-friendly', 'senior-friendly', 'Services suitable for seniors', 0);

-- ============================================================================
-- REFERRAL PROGRAMS SEED DATA
-- ============================================================================

INSERT INTO referral_programs (name, description, referrer_reward, referee_reward, currency, minimum_spending, max_uses_per_user, expiry_days, is_active, start_date, terms_and_conditions) VALUES
('Welcome Friends Program', 'Invite friends and earn rewards when they complete their first booking', 25.00, 15.00, 'USD', 50.00, 10, 365, true, CURRENT_DATE, 'Referrer receives $25 credit after referee completes first booking of $50 or more. Referee receives $15 welcome credit. Credits expire after 1 year if unused.'),
('Provider Referral Bonus', 'Refer quality service providers to expand our network', 100.00, 50.00, 'USD', 200.00, 5, 180, true, CURRENT_DATE, 'Earn $100 when your referred provider completes $200 in bookings within 6 months. Referred provider receives $50 welcome bonus.'),
('Holiday Special', 'Limited time holiday referral promotion', 50.00, 25.00, 'USD', 75.00, 3, 90, false, '2024-12-01', 'Special holiday promotion with increased rewards. Valid through holiday season only.');

-- ============================================================================
-- FEATURE FLAGS SEED DATA
-- ============================================================================

INSERT INTO feature_flags (name, description, flag_type, default_value, variants, targeting_rules, is_active, rollout_percentage) VALUES
('ai_matching_v2', 'Enhanced AI-powered service matching algorithm', 'boolean', 'false', '[{"name": "enabled", "value": true, "weight": 50}, {"name": "disabled", "value": false, "weight": 50}]', '{"userRoles": ["provider", "customer"], "regions": ["US", "CA"]}', true, 25),
('real_time_chat', 'Real-time chat between customers and providers', 'boolean', 'false', '[]', '{"subscriptionTiers": ["professional", "enterprise"]}', true, 100),
('video_consultations', 'Video consultation feature for remote services', 'boolean', 'false', '[]', '{"categories": ["mental-health", "business-consulting", "legal-services"]}', false, 0),
('dynamic_pricing', 'Dynamic pricing based on demand and availability', 'boolean', 'false', '[]', '{"regions": ["US"], "categories": ["emergency"]}', true, 10),
('advanced_analytics', 'Advanced analytics dashboard for providers', 'boolean', 'true', '[]', '{"userRoles": ["provider"], "subscriptionTiers": ["professional", "enterprise"]}', true, 100),
('instant_booking', 'Instant booking without provider confirmation', 'boolean', 'false', '[]', '{"verificationStatus": ["verified"], "categories": ["house-cleaning", "fitness-training"]}', true, 75),
('multi_language_ui', 'Multi-language user interface support', 'boolean', 'true', '[]', '{"regions": ["EU", "CA"]}', true, 100),
('background_checks', 'Mandatory background checks for providers', 'boolean', 'true', '[]', '{"regions": ["US", "UK"], "categories": ["house-cleaning", "pest-control", "hvac"]}', true, 100),
('subscription_tiers', 'Premium subscription tiers for providers', 'boolean', 'true', '[]', '{}', true, 100),
('referral_system', 'User referral and rewards system', 'boolean', 'true', '[]', '{}', true, 100);

-- ============================================================================
-- SAMPLE DEVELOPMENT USERS
-- ============================================================================

-- Note: In a real environment, these would be created through Clerk
-- This is for development/testing purposes only

INSERT INTO users (
    tenant_id, 
    clerk_id, 
    email, 
    email_verified_at, 
    role, 
    status, 
    verification_status,
    first_name, 
    last_name, 
    display_name,
    timezone,
    locale,
    referral_code,
    preferences,
    notification_settings
) VALUES
-- Admin user
(
    (SELECT id FROM tenants WHERE slug = 'loconomy-us'),
    'clerk_admin_001',
    'admin@loconomy.com',
    NOW(),
    'admin',
    'active',
    'verified',
    'Admin',
    'User',
    'Loconomy Admin',
    'America/New_York',
    'en',
    'ADMIN001',
    '{"theme": "dark", "emailDigest": "weekly"}',
    '{"email": true, "sms": false, "push": true, "marketing": false}'
),

-- Provider users
(
    (SELECT id FROM tenants WHERE slug = 'loconomy-us'),
    'clerk_provider_001',
    'sarah.johnson@email.com',
    NOW(),
    'provider',
    'active',
    'verified',
    'Sarah',
    'Johnson',
    'Sarah J.',
    'America/New_York',
    'en',
    'SARAH001',
    '{"autoAcceptBookings": false, "bufferTime": 30}',
    '{"email": true, "sms": true, "push": true, "marketing": true}'
),
(
    (SELECT id FROM tenants WHERE slug = 'loconomy-us'),
    'clerk_provider_002',
    'mike.rodriguez@email.com',
    NOW(),
    'provider',
    'active',
    'verified',
    'Mike',
    'Rodriguez',
    'Mike R.',
    'America/Los_Angeles',
    'en',
    'MIKE002',
    '{"autoAcceptBookings": true, "bufferTime": 15}',
    '{"email": true, "sms": true, "push": true, "marketing": false}'
),

-- Customer users
(
    (SELECT id FROM tenants WHERE slug = 'loconomy-us'),
    'clerk_customer_001',
    'emily.chen@email.com',
    NOW(),
    'customer',
    'active',
    'verified',
    'Emily',
    'Chen',
    'Emily C.',
    'America/New_York',
    'en',
    'EMILY001',
    '{"savedAddresses": [], "paymentReminders": true}',
    '{"email": true, "sms": false, "push": true, "marketing": true}'
),
(
    (SELECT id FROM tenants WHERE slug = 'loconomy-us'),
    'clerk_customer_002',
    'james.wilson@email.com',
    NOW(),
    'customer',
    'active',
    'verified',
    'James',
    'Wilson',
    'James W.',
    'America/Chicago',
    'en',
    'JAMES002',
    '{"preferredProviders": [], "autoTip": 15}',
    '{"email": true, "sms": true, "push": false, "marketing": false}'
);

-- ============================================================================
-- USER PROFILES SEED DATA
-- ============================================================================

-- Provider profiles
INSERT INTO user_profiles (
    user_id,
    bio,
    skills,
    experience_years,
    business_name,
    business_type,
    address_line1,
    city,
    state,
    postal_code,
    country,
    coordinates,
    average_rating,
    total_reviews,
    total_jobs_completed,
    identity_verified,
    background_check_verified,
    business_verified,
    website_url,
    social_links
) VALUES
(
    (SELECT id FROM users WHERE email = 'sarah.johnson@email.com'),
    'Professional house cleaning service with 8+ years of experience. Eco-friendly products, insured and bonded. Your satisfaction is my priority!',
    ARRAY['Deep Cleaning', 'Eco-Friendly Products', 'Move-in/Move-out', 'Post-Construction'],
    8,
    'Sarah''s Spotless Solutions',
    'Sole Proprietorship',
    '123 Main Street',
    'New York',
    'NY',
    '10001',
    'US',
    POINT(-74.0059, 40.7128),
    4.85,
    127,
    342,
    true,
    true,
    true,
    'https://sarahsspotless.com',
    '{"instagram": "@sarahsspotless", "facebook": "SarahsSpotlessSolutions"}'
),
(
    (SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'),
    'Licensed plumber with 15 years of experience. Emergency services available 24/7. No job too big or small!',
    ARRAY['Emergency Repairs', 'Pipe Installation', 'Drain Cleaning', 'Water Heater Repair'],
    15,
    'Rodriguez Plumbing Services',
    'LLC',
    '456 Oak Avenue',
    'Los Angeles',
    'CA',
    '90210',
    'US',
    POINT(-118.2437, 34.0522),
    4.92,
    89,
    234,
    true,
    true,
    true,
    'https://rodriguezplumbing.com',
    '{"yelp": "rodriguez-plumbing-la", "linkedin": "mike-rodriguez-plumber"}'
);

-- Customer profiles
INSERT INTO user_profiles (
    user_id,
    bio,
    address_line1,
    city,
    state,
    postal_code,
    country,
    coordinates,
    identity_verified
) VALUES
(
    (SELECT id FROM users WHERE email = 'emily.chen@email.com'),
    'Busy professional who values quality service and reliability. Love supporting local businesses!',
    '789 Broadway',
    'New York',
    'NY',
    '10003',
    'US',
    POINT(-73.9857, 40.7282),
    true
),
(
    (SELECT id FROM users WHERE email = 'james.wilson@email.com'),
    'Family man with two kids and a dog. Always looking for trusted service providers for home maintenance.',
    '321 Maple Street',
    'Chicago',
    'IL',
    '60601',
    'US',
    POINT(-87.6298, 41.8781),
    true
);

-- ============================================================================
-- SAMPLE LISTINGS SEED DATA
-- ============================================================================

INSERT INTO listings (
    provider_id,
    category_id,
    title,
    description,
    slug,
    pricing_type,
    hourly_rate,
    minimum_hours,
    duration_minutes,
    location_type,
    service_area,
    featured_image_url,
    images,
    max_bookings_per_day,
    advance_booking_days,
    cancellation_policy,
    keywords,
    status,
    is_featured,
    coordinates,
    radius_km
) VALUES
(
    (SELECT id FROM users WHERE email = 'sarah.johnson@email.com'),
    (SELECT id FROM categories WHERE slug = 'house-cleaning'),
    'Professional Deep House Cleaning',
    'Transform your home with our comprehensive deep cleaning service. We use eco-friendly products and pay attention to every detail. Perfect for spring cleaning, move-in/move-out, or when you want that extra sparkle!

Our service includes:
‚Ä¢ All rooms thoroughly cleaned and sanitized
‚Ä¢ Kitchen: appliances, countertops, cabinets, sink
‚Ä¢ Bathrooms: toilets, showers, tubs, mirrors, floors  
‚Ä¢ Bedrooms: dusting, vacuuming, bed making
‚Ä¢ Living areas: furniture, electronics, floors
‚Ä¢ Windows and baseboards
‚Ä¢ Trash removal

We bring all supplies and equipment. Fully insured and bonded for your peace of mind.',
    'professional-deep-house-cleaning-nyc',
    'hourly',
    45.00,
    3,
    180,
    'on_site',
    '{"type": "radius", "radius": 15, "coordinates": {"lat": 40.7128, "lng": -74.0059}}',
    'https://images.unsplash.com/photo-1581578731548-c64695cc6952',
    ARRAY[
        'https://images.unsplash.com/photo-1581578731548-c64695cc6952',
        'https://images.unsplash.com/photo-1558618666-fcd25c85cd64',
        'https://images.unsplash.com/photo-1584622650111-993a426fbf0a'
    ],
    3,
    2,
    'Free cancellation up to 24 hours before service. Same-day cancellations subject to 50% fee.',
    ARRAY['house cleaning', 'deep cleaning', 'eco-friendly', 'insured', 'bonded', 'move-in', 'move-out'],
    'active',
    true,
    POINT(-74.0059, 40.7128),
    15.0
),
(
    (SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'),
    (SELECT id FROM categories WHERE slug = 'plumbing'),
    '24/7 Emergency Plumbing Services',
    'Licensed and experienced plumber available for all your plumbing needs. From simple repairs to complex installations, we do it all! 

Emergency services available 24/7 for:
‚Ä¢ Burst pipes and water leaks
‚Ä¢ Clogged drains and toilets  
‚Ä¢ Water heater failures
‚Ä¢ Sewer backups

Regular services include:
‚Ä¢ Faucet and fixture installation
‚Ä¢ Pipe repairs and replacements
‚Ä¢ Drain cleaning and maintenance
‚Ä¢ Water heater service and installation
‚Ä¢ Toilet repairs and replacements
‚Ä¢ Gas line work (licensed)

All work guaranteed. Free estimates for major projects. Licensed, bonded, and insured.',
    '24-7-emergency-plumbing-los-angeles',
    'hourly',
    85.00,
    1,
    60,
    'on_site',
    '{"type": "radius", "radius": 25, "coordinates": {"lat": 34.0522, "lng": -118.2437}}',
    'https://images.unsplash.com/photo-1621905251189-08b45d6a269e',
    ARRAY[
        'https://images.unsplash.com/photo-1621905251189-08b45d6a269e',
        'https://images.unsplash.com/photo-1505577058444-a3dab90d4253',
        'https://images.unsplash.com/photo-1585315742922-62c5827946db'
    ],
    5,
    0,
    '24 hour cancellation policy for scheduled work. Emergency calls cannot be cancelled once technician is dispatched.',
    ARRAY['plumbing', 'emergency', 'licensed', 'water heater', 'drain cleaning', 'leak repair'],
    'active',
    false,
    POINT(-118.2437, 34.0522),
    25.0
);

-- ============================================================================
-- LISTING TAGS ASSOCIATIONS
-- ============================================================================

-- Associate tags with listings
INSERT INTO listing_tags (listing_id, tag_id) VALUES
-- Sarah's cleaning service tags
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'eco-friendly')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'licensed')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'insured')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'verified')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'experienced')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'move-in-out')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'deep-cleaning')),
((SELECT id FROM listings WHERE slug = 'professional-deep-house-cleaning-nyc'), (SELECT id FROM tags WHERE slug = 'chemical-free')),

-- Mike's plumbing service tags  
((SELECT id FROM listings WHERE slug = '24-7-emergency-plumbing-los-angeles'), (SELECT id FROM tags WHERE slug = 'emergency')),
((SELECT id FROM listings WHERE slug = '24-7-emergency-plumbing-los-angeles'), (SELECT id FROM tags WHERE slug = 'licensed')),
((SELECT id FROM listings WHERE slug = '24-7-emergency-plumbing-los-angeles'), (SELECT id FROM tags WHERE slug = 'insured')),
((SELECT id FROM listings WHERE slug = '24-7-emergency-plumbing-los-angeles'), (SELECT id FROM tags WHERE slug = 'experienced')),
((SELECT id FROM listings WHERE slug = '24-7-emergency-plumbing-los-angeles'), (SELECT id FROM tags WHERE slug = '24-7-support'));

-- ============================================================================
-- PROVIDER AVAILABILITY SEED DATA
-- ============================================================================

-- Sarah's availability (Monday-Friday, 8 AM - 6 PM)
INSERT INTO provider_availability (provider_id, day_of_week, start_time, end_time, is_available, break_duration_minutes) VALUES
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'monday', '08:00', '18:00', true, 60),
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'tuesday', '08:00', '18:00', true, 60),
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'wednesday', '08:00', '18:00', true, 60),
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'thursday', '08:00', '18:00', true, 60),
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'friday', '08:00', '18:00', true, 60),
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), 'saturday', '09:00', '15:00', true, 30);

-- Mike's availability (24/7 for emergency, regular hours Monday-Friday)
INSERT INTO provider_availability (provider_id, day_of_week, start_time, end_time, is_available, break_duration_minutes) VALUES
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'monday', '07:00', '19:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'tuesday', '07:00', '19:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'wednesday', '07:00', '19:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'thursday', '07:00', '19:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'friday', '07:00', '19:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'saturday', '08:00', '17:00', true, 60),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), 'sunday', '10:00', '16:00', true, 60);

-- ============================================================================
-- REFERRAL CODES SEED DATA
-- ============================================================================

-- Generate referral codes for sample users
INSERT INTO referral_codes (user_id, program_id, code, max_uses, is_active) VALUES
((SELECT id FROM users WHERE email = 'sarah.johnson@email.com'), (SELECT id FROM referral_programs WHERE name = 'Welcome Friends Program'), 'SARAH001', 50, true),
((SELECT id FROM users WHERE email = 'mike.rodriguez@email.com'), (SELECT id FROM referral_programs WHERE name = 'Welcome Friends Program'), 'MIKE002', 50, true),
((SELECT id FROM users WHERE email = 'emily.chen@email.com'), (SELECT id FROM referral_programs WHERE name = 'Welcome Friends Program'), 'EMILY001', 50, true),
((SELECT id FROM users WHERE email = 'james.wilson@email.com'), (SELECT id FROM referral_programs WHERE name = 'Welcome Friends Program'), 'JAMES002', 50, true);

-- ============================================================================
-- UPDATE TAG USAGE COUNTS
-- ============================================================================

-- Update tag usage counts based on associations
UPDATE tags SET usage_count = (
    SELECT COUNT(*) FROM listing_tags WHERE tag_id = tags.id
);

-- ============================================================================
-- FINAL NOTES
-- ============================================================================

-- This seed data provides:
-- ‚úÖ Complete RBAC permissions and role mappings
-- ‚úÖ Regional configuration for multi-market support  
-- ‚úÖ Major cities with geographic coordinates
-- ‚úÖ Comprehensive service category hierarchy
-- ‚úÖ Realistic sample users (admin, providers, customers)
-- ‚úÖ Professional service listings with rich descriptions
-- ‚úÖ Provider availability schedules
-- ‚úÖ Referral programs and codes for growth
-- ‚úÖ Feature flags for A/B testing and rollouts
-- ‚úÖ Tags for service discovery and filtering

-- For production deployment:
-- 1. Remove or modify sample user data
-- 2. Adjust regions and cities based on launch markets
-- 3. Customize categories for your specific service offerings
-- 4. Configure feature flags based on your rollout strategy
-- 5. Update referral programs with your reward structure
-- 6. Ensure proper Clerk integration for real user creation

-- Performance notes:
-- - All foreign key relationships are properly maintained
-- - Geographic data uses proper PostGIS POINT types
-- - Search vectors will be automatically generated for listings
-- - Indexes are already created in the main schema for optimal performance